import{S as d}from"./sweetalert2.esm.all-89IKscqO.js";import{a as E}from"./index-t--hEgTQ.js";document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("modal-nova-conta"),f=document.getElementById("nova-conta"),v=document.getElementById("cancelar-modal"),p=document.getElementById("form-nova-conta"),a=document.getElementById("email_nike"),c=document.querySelector('input[name="_token"]').value;let o=!1,l=null;const n=e=>{let t=document.getElementById("email-error");t||(t=document.createElement("span"),t.id="email-error",t.className="text-sm text-red-500 mt-1 block",a.insertAdjacentElement("afterend",t)),t.textContent=e,a.classList.add("border-red-500")},s=()=>{const e=document.getElementById("email-error");e&&e.remove(),a.classList.remove("border-red-500")},y=async e=>{if(!e){o=!1,s();return}try{(await E.post("/contas/verificar",{email_nike:e},{headers:{"X-CSRF-TOKEN":c}})).data.exists?(o=!1,n("E-mail já cadastrado.")):(o=!0,s())}catch{o=!1,d.fire("Erro","Não foi possível validar o e-mail.","error")}},i=()=>{r.classList.add("hidden")};f.addEventListener("click",()=>{r.classList.remove("hidden"),a.value="",s(),o=!1}),v.addEventListener("click",i),a.addEventListener("input",()=>{const e=a.value.trim();clearTimeout(l),l=setTimeout(()=>{y(e)},400)}),p.addEventListener("submit",async e=>{var m,u;e.preventDefault();const t=a.value.trim();if(!t){n("O campo de e-mail é obrigatório.");return}if(!o){n("E-mail inválido ou já cadastrado.");return}try{await E.post("/contas",{email_nike:t},{headers:{"X-CSRF-TOKEN":c}}),d.fire("Sucesso","Conta Nike adicionada com sucesso.","success").then(()=>location.reload())}catch(L){d.fire("Erro",((u=(m=L.response)==null?void 0:m.data)==null?void 0:u.message)||"Erro ao adicionar conta.","error")}}),document.addEventListener("keydown",e=>{e.key==="Escape"&&!r.classList.contains("hidden")&&i()}),r.addEventListener("click",e=>{e.target===r&&i()})});
