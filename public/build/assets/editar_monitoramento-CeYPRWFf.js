import{S as c}from"./sweetalert2.esm.all-89IKscqO.js";import{a as l}from"./index-t--hEgTQ.js";document.addEventListener("DOMContentLoaded",()=>{let n=new Set,i={};function u(){document.getElementById("monitoramento-tamanhosSelecionados").value=[...n].join(";")}function g(){return Object.entries(i).filter(([a,r])=>n.has(r)).map(([a])=>a).join(",")}document.querySelectorAll(".btn-editar-monitoring").forEach(s=>{s.addEventListener("click",async()=>{const a=s.getAttribute("data-id");try{const o=(await l.get(`/monitoramento/${a}`)).data;document.getElementById("monitoramento-id").value=o.id,document.getElementById("monitoramento-nome").textContent=o.nome,document.getElementById("monitoramento-foto").src=o.foto,document.getElementById("monitoramento-parcelas").value=o.parcelas,document.getElementById("monitoramento-tamanhosSelecionados").value=o.tamanho,n=new Set(o.tamanho.split(";").map(t=>t.trim()));const m=document.getElementById("monitoramento-grade-tamanhos");m.innerHTML="",i={};const p=JSON.parse(o.all_sku||"{}");Object.entries(p).forEach(([t,e])=>{i[t]=e}),[...new Set(Object.values(i))].forEach(t=>{const e=document.createElement("div");e.textContent=t,e.dataset.valor=t,e.className="text-white text-sm p-2 text-center rounded cursor-pointer hover:bg-green-700",n.has(t)?e.classList.add("bg-green-600"):e.classList.add("bg-gray-800"),e.addEventListener("click",()=>{n.has(t)?(n.delete(t),e.classList.remove("bg-green-600"),e.classList.add("bg-gray-800")):(n.add(t),e.classList.remove("bg-gray-800"),e.classList.add("bg-green-600")),u()}),m.appendChild(e)});const d=document.getElementById("monitoramento-parcelas");d.innerHTML='<option value="">Selecione</option>';const E=parseInt(o.parcelas_max??12);for(let t=1;t<=E;t++){const e=document.createElement("option");e.value=t,e.textContent=`${t}x`,parseInt(o.parcelas)===t&&(e.selected=!0),d.appendChild(e)}document.getElementById("modal-monitoramento-edicao").classList.remove("hidden")}catch{c.fire("Erro","Erro ao carregar monitoramento.","error")}})}),document.getElementById("btn-monitoramento-salvar").addEventListener("click",async()=>{const s=document.getElementById("monitoramento-id").value,a=document.getElementById("monitoramento-parcelas").value,r=document.getElementById("monitoramento-tamanhosSelecionados").value,o=g();if(!a||!r||!o){c.fire("Erro","Preencha os campos obrigatórios.","error");return}try{await l.put(`/monitoramento/${s}`,{parcelas:a,tamanhos:r,sku:o}),c.fire("Sucesso","Monitoramento atualizado com sucesso.","success").then(()=>{location.reload()})}catch{c.fire("Erro","Não foi possível salvar as alterações.","error")}})});
