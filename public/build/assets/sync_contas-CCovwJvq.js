document.addEventListener("DOMContentLoaded",d);let l={},o=!1;function d(){o||(o=!0,fetch("/api/contas-status").then(e=>e.json()).then(e=>{const u=new Date;e.forEach(t=>{const r=document.querySelector(`[data-email="${t.email_nike}"]`);if(r){const n=r.querySelector(".sync-status"),s=r.querySelector(".sync-time"),c=t.last_sync?new Date(t.last_sync):null;if(l[t.id],l[t.id]=t.sincronizado,n&&(t.sincronizado?(n.innerHTML='<span class="piscar">ðŸŸ¢</span> Sincronizado',n.className="text-sm font-semibold sync-status text-green-400"):(n.innerHTML='<span class="piscar">ðŸ”´</span> Desconectado',n.className="text-sm font-semibold sync-status text-red-400")),s&&c){const a=(u-c)/1e3;let i;a<60?i=`Sincronizado hÃ¡ ${Math.floor(a)} segundos`:a<3600?i=`Sincronizado hÃ¡ ${Math.floor(a/60)} minutos`:i=`Ãšltima sincronizaÃ§Ã£o: ${c.toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}`,s.textContent=i}else s&&(s.textContent="Nunca sincronizado")}}),o=!1}).catch(e=>{console.error("Erro ao verificar status das contas:",e),o=!1}))}setInterval(d,5e3);
