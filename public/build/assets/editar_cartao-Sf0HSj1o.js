import{S as i}from"./sweetalert2.esm.all-89IKscqO.js";import{a as u}from"./index-t--hEgTQ.js";document.querySelectorAll(".btn-editar-cartao").forEach(e=>{e.addEventListener("click",async()=>{const o=document.getElementById("modal-editar-cartao");document.getElementById("cartao_id").value=e.dataset.id,document.getElementById("nome_titular").value=e.dataset.nome,document.getElementById("numero").value=e.dataset.numero;const c=document.getElementById("bandeira"),r=document.getElementById("validade_mes"),d=document.getElementById("validade_ano"),m=await(await fetch("/cartoes/marcas")).json();c.innerHTML="",m.forEach(a=>{const t=document.createElement("option");t.value=a.name,t.textContent=a.name,a.name===e.dataset.bandeira&&(t.selected=!0),c.appendChild(t)}),r.innerHTML="";for(let a=1;a<=12;a++){const t=String(a).padStart(2,"0"),n=document.createElement("option");n.value=t,n.textContent=t,t===e.dataset.mes.padStart(2,"0")&&(n.selected=!0),r.appendChild(n)}d.innerHTML="";const s=new Date().getFullYear();for(let a=0;a<=10;a++){const t=String(s+a),n=document.createElement("option");n.value=t,n.textContent=t,t===e.dataset.ano&&(n.selected=!0),d.appendChild(n)}document.getElementById("cvv").value=e.dataset.cvv,IMask(document.getElementById("numero"),{mask:"0000 0000 0000 0000"}),IMask(document.getElementById("cvv"),{mask:"000"}),o.classList.remove("hidden")})});document.getElementById("cancelar-edicao").addEventListener("click",()=>{document.getElementById("modal-editar-cartao").classList.add("hidden")});document.getElementById("modal-editar-cartao").addEventListener("click",e=>{e.target.id==="modal-editar-cartao"&&document.getElementById("modal-editar-cartao").classList.add("hidden")});document.addEventListener("keydown",e=>{if(e.key==="Escape"){const o=document.getElementById("modal-editar-cartao");o.classList.contains("hidden")||o.classList.add("hidden")}});document.getElementById("form-editar-cartao").addEventListener("submit",async e=>{var d,l;e.preventDefault();const o=document.getElementById("cartao_id").value,c=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),r={nome_titular:document.getElementById("nome_titular").value.trim(),numero:document.getElementById("numero").value.replace(/\s/g,""),bandeira:document.getElementById("bandeira").value,validade_mes:document.getElementById("validade_mes").value,validade_ano:document.getElementById("validade_ano").value,cvv:document.getElementById("cvv").value};try{await u.put(`/cartoes/${o}`,r,{headers:{"X-CSRF-TOKEN":c}}),await i.fire({icon:"success",title:"Sucesso!",text:"Cartão atualizado com sucesso.",confirmButtonColor:"#78c676"}),location.reload()}catch(m){i.fire({icon:"error",title:"Erro!",text:((l=(d=m.response)==null?void 0:d.data)==null?void 0:l.message)||"Erro ao atualizar o cartão.",confirmButtonColor:"#e3342f"})}});
